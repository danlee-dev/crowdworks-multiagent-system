version: '3.8'

x-crawler-base: &crawler-base
  build: .
  working_dir: /app/crawler
  volumes:
    - ./crawler:/app/crawler
    - ./KC:/app/KC
    - ../elasticsearch:/elasticsearch
    - ./ReportPDF:/ReportPDF
    - ./ReferencePDF:/ReferencePDF
  restart: 'no'

services:
  atfis_krei:
    <<: *crawler-base
    container_name: crawler_atfis_krei
    command: python -u atfis_investigation_reports_KREI.py

  atfis_related:
    <<: *crawler-base
    container_name: crawler_atfis_related
    command: python -u atfis_investigation_reports_related.py

  market_segment:
    <<: *crawler-base
    container_name: crawler_market_segment
    command: python -u atfis_Market_segment.py

  newsletters:
    <<: *crawler-base
    container_name: crawler_newsletters
    command: python -u atfis_newsletters.py

  static_reports:
    <<: *crawler-base
    container_name: crawler_static_reports
    command: python -u atfis_static_reports.py

  kamis_foreign:
    <<: *crawler-base
    container_name: crawler_kamis_foreign
    command: python -u KAMIS_foreign_reports.py

  kamis_investigation:
    <<: *crawler-base
    container_name: crawler_kamis_investigation
    command: python -u KAMIS_investigation_reports.py

  kati_country:
    <<: *crawler-base
    container_name: crawler_kati_country
    command: python -u KATI_export_country_reports.py

  kati_issue:
    <<: *crawler-base
    container_name: crawler_kati_issue
    command: python -u KATI_export_issue_reports.py

  kati_item:
    <<: *crawler-base
    container_name: crawler_kati_item
    command: python -u KATI_export_item_reports.py

  krei_observation:
    <<: *crawler-base
    container_name: crawler_krei_observation
    command: python -u KREI_observation_reports.py
    volumes:
    - ./crawler:/app/crawler
    - ../elasticsearch:/elasticsearch
    - ./ReportPDF:/ReportPDF
    - ./ReferencePDF:/ReferencePDF

  kc_processor:
    <<: *crawler-base
    container_name: crawler_kc
    command: python -u KC.py
    working_dir: /app/KC
    env_file:
      - .env
    volumes:
      - ./KC:/app/KC
      - ../elasticsearch/datas:/datas
      - ./ReportPDF:/ReportPDF
      - ./ReferencePDF:/ReferencePDF

  clear_report_pdf:
    <<: *crawler-base
    container_name: crawler_clear_report_pdf
    command: python -u clear_ReportPDF.py
